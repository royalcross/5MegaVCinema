<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
    <mapper namespace="com.itwillbs.vCinema.mapper.AdminCsMapper">
  
	<!-- 공지사항 목록 개수 -->
	<select id="selectNoticeListCount" resultType="int">
		SELECT COUNT(*)
		FROM notice
		<if test="!searchKeyword.equals('')">
			WHERE 
				notice_theater_name like concat('%',#{searchKeyword},'%')
				or notice_subject like concat('%',#{searchKeyword},'%')
				or notice_content like concat('%',#{searchKeyword},'%')
		</if>
	</select>
	
	<!-- 공지사항 목록 조회 -->
	<select id="selectNoticeList" resultType="notice">
		SELECT *
		FROM notice
		<if test="!searchKeyword.equals('')">
			WHERE 
				notice_theater_name like concat('%',#{searchKeyword},'%')
				or notice_subject like concat('%',#{searchKeyword},'%')
				or notice_content like concat('%',#{searchKeyword},'%')
		</if>
		ORDER BY
			notice_num DESC		
		LIMIT
			#{startRow}     
			, #{listLimit} 
	</select>
	
	<!-- 관리자 공지사항 삭제 -->
	<delete id="deleteNotice">
		DELETE 
		FROM notice
		WHERE notice_num = #{notice_num}
	</delete>
	
	<!-- 관리자 공지사항 등록 -->
	<insert id="insertNotice">
		INSERT INTO notice
		VALUES (
			null
			, #{notice_theater_name}
			, #{notice_subject}
			, #{notice_content}
			, now()
		)
	
	</insert>
	
	<!-- 관리자 - 공지사항 수정 (상세내용 가져오기) -->
	<select id="selectNotice" resultType="notice">
		SELECT *
		FROM notice
		WHERE 
			notice_num = #{notice_num} 
	</select>
	
	<!-- 관리자 - 공지사항 수정 (상세내용 가져오기) -->
	<update id="updateNotice">
		UPDATE notice
		SET 
			notice_theater_name = #{notice_theater_name}
			,notice_subject = #{notice_subject}
			,notice_content = #{notice_content}
		WHERE
			notice_num = #{notice_num}
	</update>
	
	
	
	
	
	
	
	
	
</mapper>